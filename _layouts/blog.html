---
layout: default
---

<div class="blog-page">
  <!-- Blog Hero Section -->
  <section class="blog-hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">{{ page.title }}</h1>
        <p class="hero-subtitle">{{ page.description }}</p>
      </div>
    </div>
  </section>

  <!-- Blog Filter and Search -->
  <section class="blog-filter">
    <div class="container">
      <div class="filter-controls">
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">å…¨éƒ¨</button>
          {% assign categories = site.posts | map: 'categories' | join: ',' | split: ',' | uniq | sort %}
          {% for category in categories %}
            {% unless category == blank %}
              <button class="filter-tab" data-filter="{{ category | slugify }}">{{ category }}</button>
            {% endunless %}
          {% endfor %}
        </div>
        <div class="search-box">
          <input type="text" id="blog-search" placeholder="æœç´¢æ–‡ç« ..." class="search-input">
          <button class="search-btn">ğŸ”</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Posts Grid -->
  <section class="blog-posts">
    <div class="container">
      <div class="posts-grid" id="posts-grid">
        {% for post in site.posts %}
          <article class="post-card animate" 
                   data-categories="{% for category in post.categories %}{{ category | slugify }} {% endfor %}"
                   data-tags="{% for tag in post.tags %}{{ tag | slugify }} {% endfor %}"
                   data-title="{{ post.title | downcase }}"
                   data-excerpt="{{ post.excerpt | strip_html | downcase }}">
            
            {% if post.image %}
              <div class="post-image">
                <img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy">
                <div class="post-overlay">
                  <a href="{{ post.url | relative_url }}" class="read-more-btn">é˜…è¯»å…¨æ–‡</a>
                </div>
              </div>
            {% endif %}
            
            <div class="post-content">
              <div class="post-meta">
                <time class="post-date">{{ post.date | date: "%Yå¹´%mæœˆ%dæ—¥" }}</time>
                <span class="post-reading-time">{{ post.content | number_of_words | divided_by: 200 | plus: 1 }} åˆ†é’Ÿé˜…è¯»</span>
              </div>
              
              <h2 class="post-title">
                <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
              </h2>
              
              <p class="post-excerpt">{{ post.excerpt | strip_html | truncate: 120 }}</p>
              
              <div class="post-tags">
                {% for tag in post.tags limit: 3 %}
                  <span class="tag">{{ tag }}</span>
                {% endfor %}
              </div>
              
              <div class="post-categories">
                {% for category in post.categories %}
                  <span class="category">{{ category }}</span>
                {% endfor %}
              </div>
            </div>
          </article>
        {% endfor %}
      </div>

      <!-- Empty State -->
      <div class="blog-empty" id="blog-empty" style="display: none;">
        <div class="empty-content">
          <div class="empty-icon">ğŸ“</div>
          <h3>æš‚æ— ç›¸å…³æ–‡ç« </h3>
          <p>è¯·å°è¯•å…¶ä»–å…³é”®è¯æˆ–æŸ¥çœ‹å…¨éƒ¨æ–‡ç« </p>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="load-more-section" id="load-more-section">
        <button class="btn btn-outline load-more-btn" id="load-more-btn">åŠ è½½æ›´å¤š</button>
      </div>
    </div>
  </section>

  <!-- Blog Stats -->
  <section class="blog-stats section">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-number">{{ site.posts.size }}</div>
          <div class="stat-label">æ–‡ç« æ€»æ•°</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{{ categories.size }}</div>
          <div class="stat-label">åˆ†ç±»æ•°é‡</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{% assign total_words = 0 %}{% for post in site.posts %}{% assign total_words = total_words | plus: post.content | number_of_words %}{% endfor %}{{ total_words | divided_by: 1000 }}K+</div>
          <div class="stat-label">æ€»å­—æ•°</div>
        </div>
        <div class="stat-item">
          <div class="stat-number">{{ site.posts.first.date | date: "%Y" }}</div>
          <div class="stat-label">å¼€å§‹å†™ä½œ</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Subscription -->
  <section class="newsletter-section">
    <div class="container">
      <div class="newsletter-content">
        <h2 class="newsletter-title">è®¢é˜…æˆ‘çš„åšå®¢</h2>
        <p class="newsletter-description">è·å–æœ€æ–°çš„æŠ€æœ¯æ–‡ç« å’Œå¼€å‘å¿ƒå¾—ï¼Œä¸å®šæœŸåˆ†äº«æœ‰ä»·å€¼çš„å†…å®¹</p>
        <form class="newsletter-form" id="newsletter-form">
          <div class="form-group">
            <input type="email" class="form-input" placeholder="è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€" required>
            <button type="submit" class="btn btn-primary">è®¢é˜…</button>
          </div>
          <p class="newsletter-note">æˆ‘ä»¬å°Šé‡æ‚¨çš„éšç§ï¼Œä¸ä¼šå‘é€åƒåœ¾é‚®ä»¶</p>
        </form>
      </div>
    </div>
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const filterTabs = document.querySelectorAll('.filter-tab');
  const postCards = document.querySelectorAll('.post-card');
  const searchInput = document.getElementById('blog-search');
  const postsGrid = document.getElementById('posts-grid');
  const emptyState = document.getElementById('blog-empty');
  const loadMoreBtn = document.getElementById('load-more-btn');
  const loadMoreSection = document.getElementById('load-more-section');
  
  let visiblePosts = 6; // åˆå§‹æ˜¾ç¤ºçš„æ–‡ç« æ•°é‡
  let filteredPosts = Array.from(postCards);

  // åˆå§‹åŒ–æ˜¾ç¤º
  showPosts();

  // åˆ†ç±»ç­›é€‰
  filterTabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const filter = this.getAttribute('data-filter');
      
      // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
      filterTabs.forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      
      // ç­›é€‰æ–‡ç« 
      filterPosts(filter, searchInput.value);
    });
  });

  // æœç´¢åŠŸèƒ½
  searchInput.addEventListener('input', function() {
    const activeFilter = document.querySelector('.filter-tab.active').getAttribute('data-filter');
    filterPosts(activeFilter, this.value);
  });

  // åŠ è½½æ›´å¤š
  loadMoreBtn.addEventListener('click', function() {
    visiblePosts += 6;
    showPosts();
  });

  function filterPosts(category, searchTerm) {
    filteredPosts = Array.from(postCards).filter(card => {
      const categories = card.getAttribute('data-categories');
      const title = card.getAttribute('data-title');
      const excerpt = card.getAttribute('data-excerpt');
      
      // åˆ†ç±»ç­›é€‰
      const categoryMatch = category === 'all' || categories.includes(category);
      
      // æœç´¢ç­›é€‰
      const searchMatch = !searchTerm || 
                         title.includes(searchTerm.toLowerCase()) || 
                         excerpt.includes(searchTerm.toLowerCase());
      
      return categoryMatch && searchMatch;
    });
    
    visiblePosts = 6; // é‡ç½®æ˜¾ç¤ºæ•°é‡
    showPosts();
  }

  function showPosts() {
    // éšè—æ‰€æœ‰æ–‡ç« 
    postCards.forEach(card => {
      card.style.display = 'none';
      card.classList.remove('animate');
    });
    
    // æ˜¾ç¤ºç­›é€‰åçš„æ–‡ç« 
    const postsToShow = filteredPosts.slice(0, visiblePosts);
    postsToShow.forEach((card, index) => {
      card.style.display = 'block';
      setTimeout(() => {
        card.classList.add('animate');
      }, index * 100);
    });
    
    // æ˜¾ç¤º/éšè—ç©ºçŠ¶æ€
    if (filteredPosts.length === 0) {
      emptyState.style.display = 'block';
      postsGrid.style.display = 'none';
      loadMoreSection.style.display = 'none';
    } else {
      emptyState.style.display = 'none';
      postsGrid.style.display = 'grid';
      
      // æ˜¾ç¤º/éšè—åŠ è½½æ›´å¤šæŒ‰é’®
      if (visiblePosts >= filteredPosts.length) {
        loadMoreSection.style.display = 'none';
      } else {
        loadMoreSection.style.display = 'block';
      }
    }
  }

  // è®¢é˜…è¡¨å•
  const newsletterForm = document.getElementById('newsletter-form');
  newsletterForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const email = this.querySelector('input[type="email"]').value;
    
    // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è®¢é˜…é€»è¾‘
    alert('æ„Ÿè°¢è®¢é˜…ï¼æˆ‘ä»¬ä¼šå°†æœ€æ–°å†…å®¹å‘é€åˆ°æ‚¨çš„é‚®ç®±ã€‚');
    this.reset();
  });

  // æ»šåŠ¨åŠ¨ç”»
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate');
      }
    });
  }, observerOptions);

  // è§‚å¯Ÿç»Ÿè®¡é¡¹ç›®
  document.querySelectorAll('.stat-item').forEach(item => {
    observer.observe(item);
  });
});
</script>